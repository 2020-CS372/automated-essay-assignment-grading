Figure 1. The Architecture of the CNC system based on switched Ethernet
 It is known that the time synchronization of  motor control in CNC systems must achieve 1us or below  which is the most precise requirement in various networked  control systems.  This paper will present the time  synchronization mechanism of CNC systems which are  based on switched Ethernet.  To obtain accurate time  synchronization, we introduce the preemptive priority  queuing in the design of the switch and use the clock of the  switch as the time reference instead of that of MCU. This  paper consists of five sections, including the introduction  section.  Section 2 describes the fundamental of the CNC  systems based on switched Ethernet and the basic principles  of time synchronization.  Section 3 outlines time synchronization mechanism we present in detail.  Section 4  presents the test result.  Finally Section 5 concludes the paper.  II. STATE OF THE ART       The CNC systems based on switched Ethernet can be  shown in Figure 1.  MachineTool Actuator Sensors Switch HMI MCU Monitor Figure 1. The Architecture of the CNC system based on switched Ethernet       By connecting MCU, HMI, servo controllers, sensors,  PCL and I/O with an Ethernet switch, it forms a distributed  control system with star topology.  The star topology has  much advantage than ring or daisy chain topology because  problems of ring or daisy chain scheme in use is that the  bandwidth utilization efficiency and delay bound of real-time  packages highly depends on every node’s performance,  T284 especially there are some embedded systems with little  computing resource, while the star topology separates the  communication efficiency and the nodes’ performances, and  it is easy to replace, install or remove hosts or other devices.         This system can be seen as a MIMO complex networked  control system with communication delay.  IEC has  provisionally defined five levels of synchronization accuracy  (IEC 61850-5, section 12. 6.6.1 and 12.6.6.2 [5]) for various  systems from T1 to T5 varying from 1ms to 1us.  Because in  the CNC systems there are motor control tasks, the level of  synchronization accuracy is T5, i.e., 1us.  Many theory and methods have been proposed for  synchronizing clocks in distributed systems in recent years. 

